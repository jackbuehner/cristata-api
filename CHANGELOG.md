# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

## 2.0.0-0 (2022-02-21)


### âš  BREAKING CHANGES

* export Cristata as default
* use object id (_id) instead of github id (github_id)
* require auth for websocket connections

### Features

* accept partial data in patch model ([446fae6](https://github.com/jackbuehner/cristata-api/commit/446fae6a101bc57c8d742359edf34893871a000f))
* add a private CORS proxy ([52bee89](https://github.com/jackbuehner/cristata-api/commit/52bee89c2f78b603bf340c0f0f7c82205793fb83))
* add apollo graphql ([649a049](https://github.com/jackbuehner/cristata-api/commit/649a049f02f560ee1847c38faa7a0d0cadf84842))
* add core schema with suport for additions from the config ([76088fe](https://github.com/jackbuehner/cristata-api/commit/76088fe7af4800e3c9e40f8f159f5ec33c767f3a))
* add interface for collection schema fields ([503d0e2](https://github.com/jackbuehner/cristata-api/commit/503d0e27c938f2985b871bfbd11c39ef33bc5094))
* add layout property to articles ([9e7e205](https://github.com/jackbuehner/cristata-api/commit/9e7e205c191713fb4e32eea746d4f3ae66aeb9d3))
* add legacy fields to collections ([c03f13d](https://github.com/jackbuehner/cristata-api/commit/c03f13d2922aa925f7f6b5a4da513d3ca59eddee))
* add new user photo endpoint ([ae22a07](https://github.com/jackbuehner/cristata-api/commit/ae22a0717485cba894cc5a30abd1123ad637a767))
* add pagination to aggregation of generated mongoose collections ([f5addb6](https://github.com/jackbuehner/cristata-api/commit/f5addb6d1e24c86efe515dd040308346b6e1bafd))
* add permissions to db config ([33ad7dc](https://github.com/jackbuehner/cristata-api/commit/33ad7dcaf6ed080d57e2e99295c61263b812971b))
* add public flushes query ([8f54bca](https://github.com/jackbuehner/cristata-api/commit/8f54bcafd1b6432c67a0db354b770e2e688696e6))
* add queries for when a user exists and how a user can login ([df25b59](https://github.com/jackbuehner/cristata-api/commit/df25b59a643e0d040f276288859737b8277ed5be))
* add query for users not assigned to any teams ([83ad153](https://github.com/jackbuehner/cristata-api/commit/83ad153d89b38244c035f617c9752e80ae3a8875))
* add relations to users ([7efe795](https://github.com/jackbuehner/cristata-api/commit/7efe795c3cb9ec617dbccbadb05eb40df5de69db))
* add teams collection to the database and api ([6d8d296](https://github.com/jackbuehner/cristata-api/commit/6d8d296f71398080fb2b9cb83183cce88c909b97))
* add template to article schema ([520ec38](https://github.com/jackbuehner/cristata-api/commit/520ec3849ce4b46e5e440734870d393e00383e5a))
* add The Royal Flush routes and models ([38176bd](https://github.com/jackbuehner/cristata-api/commit/38176bd92631302b171da833a04d2a316ffcb788))
* add util to return date with extra time removed ([35dfa22](https://github.com/jackbuehner/cristata-api/commit/35dfa2205928db23b1a6eea33da8cef0fb6cdb95))
* add v3 collectionActivity query ([1d4b3d4](https://github.com/jackbuehner/cristata-api/commit/1d4b3d4d54db00a26b60dd2cd8eba060dd89a422))
* allow api origins ([8e896da](https://github.com/jackbuehner/cristata-api/commit/8e896da3e3970fa8cf323dc23a1395903c72a2ae))
* allow changing permissions ([90676b4](https://github.com/jackbuehner/cristata-api/commit/90676b4b61f6cdc3fc5f9d9baf987fd3d9a00dde))
* **apollo:** log errors to server console ([81df69f](https://github.com/jackbuehner/cristata-api/commit/81df69f3a8572d82a11f254ffd86cd7d4ef6e193))
* **articles:** bring back auto slug and email notifications ([3f0ff03](https://github.com/jackbuehner/cristata-api/commit/3f0ff03e3552d06dd033ae2702fad7518261f2ce))
* build mongoose schema subobjects as subdocs ([130bb35](https://github.com/jackbuehner/cristata-api/commit/130bb3523cb683a0fb8a90c504e27d04c677e0f1))
* configure cors for apollo ([8895802](https://github.com/jackbuehner/cristata-api/commit/889580204bee787c3f1881f78d84034a3b17ac57))
* convert hex id strings to object ids ([f1ea93b](https://github.com/jackbuehner/cristata-api/commit/f1ea93be3aecda1b6ebfc487b49d593c9573f41a))
* convert iso dates in JSON scalar into js dates ([96c199e](https://github.com/jackbuehner/cristata-api/commit/96c199e3bace2fd64c9de6adb35c9a8971062f10))
* create mongoose schemas and models from the config ([14ea881](https://github.com/jackbuehner/cristata-api/commit/14ea881b04bd73a13795ea48c50110df26bb09be))
* **createDoc:** always give current user permission to edit the document they create ([dbacf6d](https://github.com/jackbuehner/cristata-api/commit/dbacf6ddebeb2831c5a47b9a3ab7f98526dd468f))
* **db:** add more teams ids ([a549937](https://github.com/jackbuehner/cristata-api/commit/a5499372e6527f32d26eae6fb0a884c08f901027))
* **db:** do not add _id to auto-generated schemas ([b5fb52e](https://github.com/jackbuehner/cristata-api/commit/b5fb52e95e00622191836b3dde637622660c8e0f))
* deny permission when account has next_step ([179b099](https://github.com/jackbuehner/cristata-api/commit/179b0992f754fcdbd51c553b91abd9cb4a3e37a3))
* **deps:** update axios and mongoose ([2645473](https://github.com/jackbuehner/cristata-api/commit/26454735a0766512ed1dd687da8d50691f8e0d37))
* enable detailed teams data for users in graphql api ([44f448d](https://github.com/jackbuehner/cristata-api/commit/44f448d5322688f5b63ab367f88a3e65a6401eb0))
* enable finding a public article by slug and optional date ([c10d3af](https://github.com/jackbuehner/cristata-api/commit/c10d3afd35c7d320acecc05fb10d49709f167159))
* enable getting user usernmae ([fd0214e](https://github.com/jackbuehner/cristata-api/commit/fd0214eaad38616b23a999d40b22d3a6335bf639))
* enable optional filters on findDoc helper ([5835521](https://github.com/jackbuehner/cristata-api/commit/583552170dca22e53f8ff729da5bb4871a9d37c5))
* enable sign in with local account or github account ([621743d](https://github.com/jackbuehner/cristata-api/commit/621743df2ef7228053852517f7cb227fb2f9b140))
* enable text compression for responses ([b7d5218](https://github.com/jackbuehner/cristata-api/commit/b7d5218a75c71d37d5d1c9d164dc39f66387a4f4))
* export  users prune keep array ([e133796](https://github.com/jackbuehner/cristata-api/commit/e133796c96fcbfd96723faf3f7b338ad658ae847))
* export collection people resolvers ([57ae26b](https://github.com/jackbuehner/cristata-api/commit/57ae26b76d42da2f14b1d6a4621875acab146198))
* export Cristata as default ([3ba8a01](https://github.com/jackbuehner/cristata-api/commit/3ba8a01a01c6dee9385f0ab3675b5512ae7422d8))
* export pruned article keep keys constant ([e678c02](https://github.com/jackbuehner/cristata-api/commit/e678c025044d0881986ceda2d66425783403a492))
* filter and match by whether timestamps are baseline times ([b023a3d](https://github.com/jackbuehner/cristata-api/commit/b023a3d9ce09aec9c57a212057ff667038c91c89))
* find doc by an alternate field (not _id) ([2e42ddb](https://github.com/jackbuehner/cristata-api/commit/2e42ddb9fafd6c15e5b62f3daaacbf88fa8cc087))
* find shorturls by code instead of by _id ([c7fd5a1](https://github.com/jackbuehner/cristata-api/commit/c7fd5a1f8c28f4310d57b7f412d8e6079bbb73a4))
* **findDocs:** allow docs with Users.ANY in permissions to be accesible to any authenticated user ([201f53b](https://github.com/jackbuehner/cristata-api/commit/201f53b27293961165d2f9491ac7b3d56ccc3be4))
* **findDocs:** support extra pipeline ([c739d78](https://github.com/jackbuehner/cristata-api/commit/c739d7811eaefeeafdff6e76dc5d54b993847309))
* force social media team ([4e9007e](https://github.com/jackbuehner/cristata-api/commit/4e9007e847b8707e9883c0281e6c1233e1f724bb))
* func to check whether variable is ISO date string ([6a48cda](https://github.com/jackbuehner/cristata-api/commit/6a48cda047f97512ad053ac1c0177a22bce8a476))
* function to check whether variable is object ([3737b20](https://github.com/jackbuehner/cristata-api/commit/3737b20f2ce0f374ed7dfe26ae462af9b2ce050d))
* function to convert ISO dates anywhere in object to js dates ([55aa46d](https://github.com/jackbuehner/cristata-api/commit/55aa46daa1a2797dac9056cad7061bac6effe45d))
* function to parse cookie header ([7686c1b](https://github.com/jackbuehner/cristata-api/commit/7686c1be65e69afaebe90ad531b0dffd5fecc124))
* function to split string only once ([f0ee09a](https://github.com/jackbuehner/cristata-api/commit/f0ee09a9590d526f08c38974bf1e13a8b61b820e))
* get list of article tags and categories ([3a3457b](https://github.com/jackbuehner/cristata-api/commit/3a3457b1fcca71ea5c62dce19c89a1771ea43bb9))
* **gql:** add findDocs helper function to retrieve paginated docs ([9b50fed](https://github.com/jackbuehner/cristata-api/commit/9b50fedab482e2aa827122348cedf477f8980419))
* **gql:** add generic Paged type for paged responses ([3698bbf](https://github.com/jackbuehner/cristata-api/commit/3698bbf8881444a20c75950c8025ed06883c93d4))
* **gql:** add helper and type for collection action access ([1e3e507](https://github.com/jackbuehner/cristata-api/commit/1e3e5071e4ad0ca88d06b7605fbb5337cc37e7a0))
* **gql:** add helper to send payload to subscriptions when mutation occurs ([f2fbb72](https://github.com/jackbuehner/cristata-api/commit/f2fbb720d814a8873b3bc23c6eba0b7b606cdf91))
* **gql:** add helpers for pruning document contents ([50389a9](https://github.com/jackbuehner/cristata-api/commit/50389a9f28bc15ee2843c2c49b4a068c4c0627e0))
* **gql:** add helpers to perform common actions on mongoose documents ([1da43b6](https://github.com/jackbuehner/cristata-api/commit/1da43b68265153662de257c6db1b91224b14e993))
* **gql:** add json scalar type ([87204f4](https://github.com/jackbuehner/cristata-api/commit/87204f4a93aabb61c6fba1fc174dd265a68266f3))
* **gql:** add option to allow finding docs using the helpers without authentication ([fcec413](https://github.com/jackbuehner/cristata-api/commit/fcec413bfb5bf7c80b8e659a91ca077de826e5ea))
* **gql:** add publishing logic ([f394937](https://github.com/jackbuehner/cristata-api/commit/f39493764d14aeb9dcbdd6e6574a1e18b2f8f21e))
* **gql:** add void scalar type ([aa02c99](https://github.com/jackbuehner/cristata-api/commit/aa02c99d688da4ae2b7229990f9b25b33d0e6f28))
* **gql:** include config in context ([39933a6](https://github.com/jackbuehner/cristata-api/commit/39933a6939cff42e0d0eb88013d7f3f0de32b95e))
* **gql:** move authentication check to a helper to be used in resolvers and other helpers ([6c7a3c6](https://github.com/jackbuehner/cristata-api/commit/6c7a3c657fd4d708e38c9a08bcda03e431fa0b59))
* **gql:** replace user id with user type in history array ([f0a9f13](https://github.com/jackbuehner/cristata-api/commit/f0a9f131c29160e742261b195b01f6e064e9fe2f))
* **gql:** support nested objects when specifying keys to keep when pruning a doc ([a3f51f1](https://github.com/jackbuehner/cristata-api/commit/a3f51f1aa72e4f3442729717c5288927cd3beb35))
* **gql:** support subscriptions ([c346c9b](https://github.com/jackbuehner/cristata-api/commit/c346c9b81b527e196edba7b8492d82b7da7bfff2))
* **gql:** unify helper functions into consistent parameter format ([1a9eade](https://github.com/jackbuehner/cristata-api/commit/1a9eade668cd2ff29236c614ae7e4ee37f186b68))
* isolate config from rest of server ([cefe9d6](https://github.com/jackbuehner/cristata-api/commit/cefe9d6c3989058495f017b5fb1f7f905fbfd777))
* make article authors and primary editors mandatory watchers ([4b05d8a](https://github.com/jackbuehner/cristata-api/commit/4b05d8aed568c31a8c62ca39a3b6abdfd4cc6033))
* **modifyDoc:** support fullAccess arg (like findDoc) ([4f4c1e2](https://github.com/jackbuehner/cristata-api/commit/4f4c1e28e74deb075164074e68bbc8fa69c0039f))
* move collections to config ([3e0c4b7](https://github.com/jackbuehner/cristata-api/commit/3e0c4b79c8a364886b2345829ce350b9f114ef03))
* only include publish people and timestamps on collections that can be published ([445e10d](https://github.com/jackbuehner/cristata-api/commit/445e10d464eeb363431c71b0673d040ba5813ef4))
* **pruneDoc:** convert doc to lean doc before flattening ([a3237b5](https://github.com/jackbuehner/cristata-api/commit/a3237b527c3944887c383ddc0a45979163ca9eeb))
* pull photo_credit from photos collection for articles ([cb762c9](https://github.com/jackbuehner/cristata-api/commit/cb762c927782c01e3a4d84a939074b967e2f28b0))
* **qgl:** ability to include permissions to collection type ([e1c778e](https://github.com/jackbuehner/cristata-api/commit/e1c778e16378fbc57cd794110ab075681c4524bf))
* remove redundant permissions ([d346812](https://github.com/jackbuehner/cristata-api/commit/d3468121c460b78aa982d37a3e09e357966d44a3))
* remove unused history endpoint ([53a1277](https://github.com/jackbuehner/cristata-api/commit/53a12777369cb5d1b514c3560979d07c799fbbd1))
* require auth for websocket connections ([4eea347](https://github.com/jackbuehner/cristata-api/commit/4eea3479b55b25c4324c509735c8be58c79af22d))
* return _id of deleted doc ([09cf590](https://github.com/jackbuehner/cristata-api/commit/09cf590813e00ab507ea02f17a8862d5768bb6f0))
* **satire:** allow all managing editors to view all satires ([69d7663](https://github.com/jackbuehner/cristata-api/commit/69d76637d70ab8174b837f6a50e58433cad31f8e))
* save [@thepaladin](https://github.com/thepaladin).news or [@furman](https://github.com/furman).edu email to profile ([32bc5fb](https://github.com/jackbuehner/cristata-api/commit/32bc5fb5c584c693db144d0c1132a0ddde214ba1))
* send fathom url with pasword to admins ([eaa8e26](https://github.com/jackbuehner/cristata-api/commit/eaa8e265a48dbe384fc324eb542e6934d0d01fcc))
* send full profiles instead of user ids ([3d51251](https://github.com/jackbuehner/cristata-api/commit/3d51251983b5ea75d877228b8d3247d9b3fdf3b6))
* **sendEmail:** always append 'Powered by Cristata' message to emails ([70ddb34](https://github.com/jackbuehner/cristata-api/commit/70ddb340621c961e1429672e32398cdc33364f09))
* **settings:** allow querying for setting objectId ([d05d715](https://github.com/jackbuehner/cristata-api/commit/d05d71567188f1b4705c8a110e625aedb601f01e))
* **settings:** merge new setting into old setting instead of replacing old setting with new setting ([641184d](https://github.com/jackbuehner/cristata-api/commit/641184d9b114bf2d8b8d7bdfe8fccfdd4c096528))
* **settings:** only require JSON to modify ([1e28437](https://github.com/jackbuehner/cristata-api/commit/1e284374952eac1d6952cae0ad3749232c08beec))
* simplify database config structure ([31300f5](https://github.com/jackbuehner/cristata-api/commit/31300f53e3daafa81106669ca0ab16db9a67b171))
* **slugify:** support custom replacement ([d024bc5](https://github.com/jackbuehner/cristata-api/commit/d024bc567ebec2d22d1a04bb226691fcb1d68436))
* sort photos with newest first ([6d1862e](https://github.com/jackbuehner/cristata-api/commit/6d1862edc2af36a7d45ed41703f02d25eaf8123c))
* stage counts for articles and satire ([a5fd6b5](https://github.com/jackbuehner/cristata-api/commit/a5fd6b5d655719fcc0258dc8fad3efaea51f8111))
* support conditional permissions ([2affe58](https://github.com/jackbuehner/cristata-api/commit/2affe58d2620fe821906992f53cc9250527dcaa7))
* support custom access rules for finding docs ([a7f23d9](https://github.com/jackbuehner/cristata-api/commit/a7f23d9c61765c57d93803b6e01b9da2e1d39e6c))
* support getting article editors publicly ([53c2ee5](https://github.com/jackbuehner/cristata-api/commit/53c2ee56c4c950f671f8040005adfa36e51acc14))
* support getting featured articles ([bd2974c](https://github.com/jackbuehner/cristata-api/commit/bd2974c3c6cb64e7915e8e2fd472c9e47d16ba6e))
* support local mongodb connections ([ecc6151](https://github.com/jackbuehner/cristata-api/commit/ecc61510069ba5410fb11637e5427b6678dbcb7c))
* support parsing ISO dates inside arrays ([48ee50e](https://github.com/jackbuehner/cristata-api/commit/48ee50eb8ef1de690724b701788f7a1e9465a309))
* support querying public user by slug ([77a4765](https://github.com/jackbuehner/cristata-api/commit/77a4765bb8c3e604b5a1a310a78c99f2a84a5dd3))
* support storing external accounts ([9aeab9b](https://github.com/jackbuehner/cristata-api/commit/9aeab9b85d9e0a098a7b3f8baa7c2dbaa8ebc494))
* switch Cross-Origin-Resource-Policy to same-site ([a97b7ea](https://github.com/jackbuehner/cristata-api/commit/a97b7ea504154f966699c72b9433746a00bbe88f))
* **teams:** allow organizers to delete team ([fcd3298](https://github.com/jackbuehner/cristata-api/commit/fcd3298c64a0b365e1e29790b616908532beb09d))
* **teams:** move access rules to permissions function ([573a0e7](https://github.com/jackbuehner/cristata-api/commit/573a0e739604e2c114e99136a38ae389341c492b))
* **teams:** reveal team data to any authenticated user ([04176d9](https://github.com/jackbuehner/cristata-api/commit/04176d9ac9fca845edb6d0b13c4ff8d897ad2b69))
* throw appropriate error when doc to hide cannot be found ([acadfa9](https://github.com/jackbuehner/cristata-api/commit/acadfa90f58191c2fd5e1ac70bbf3479286de0c7))
* use a same deseralize user function for login ([330c682](https://github.com/jackbuehner/cristata-api/commit/330c682677bc33bf7f5e634d6532c4695e757de3))
* use api v2 on /v2 and /api/v2 ([6d0188d](https://github.com/jackbuehner/cristata-api/commit/6d0188d0b622a5e52c45816c8939de914fd70c9f))
* use better default permissions ([7d10327](https://github.com/jackbuehner/cristata-api/commit/7d103278a6beb964bff4316068fa7e51de36d7cc))
* use better language is email to watchers ([c2dea74](https://github.com/jackbuehner/cristata-api/commit/c2dea7457535a2c09ed1ac14692d30b374122e5d))
* use helmet to prevent vulnerabilities ([34fc319](https://github.com/jackbuehner/cristata-api/commit/34fc31960449c63f0c52e2c1f0cdff3fc3511b50))
* use object id (_id) instead of github id (github_id) ([5266237](https://github.com/jackbuehner/cristata-api/commit/52662374fa35692bf4dcfddabdfb67bb5399a38f))
* use teams from db instead of from github ([9ddd103](https://github.com/jackbuehner/cristata-api/commit/9ddd10342949c11ea3ff8d4565c6714e27f9bf5e))
* **user-photo:** pipe the request to the photo url ([0870e10](https://github.com/jackbuehner/cristata-api/commit/0870e106e3df58a4af51fa2ef85db08d86110aca))
* **users:** add ability to migrate to create username and password for users that only sign in with GitHub ([2b7f6d6](https://github.com/jackbuehner/cristata-api/commit/2b7f6d667ce7f2b0a10ee5ab03c5909797ebdc59))
* **users:** add userResendInvite query ([28a1922](https://github.com/jackbuehner/cristata-api/commit/28a1922235a09e734940f3aa84ece19244aacb99))
* **users:** enable creating new users with temporary passwords and changing user passwords ([c4aa8f5](https://github.com/jackbuehner/cristata-api/commit/c4aa8f5da089534b15740222a7b1de033f1e0b9f))
* **users:** enable deactivate (retire) a user ([6b6d95f](https://github.com/jackbuehner/cristata-api/commit/6b6d95f939bb610e70e13373129bd26eb26fae51))
* **users:** one-click account actvation login ([d36da2d](https://github.com/jackbuehner/cristata-api/commit/d36da2d574c8ff92538f7c6948762651de8031ae))
* **users:** only allow normal users to modify themselves. ([7df3b30](https://github.com/jackbuehner/cristata-api/commit/7df3b305ae8e0fa6559bcf2ce0a02ce34e9ea979))
* **users:** use local teams instead of GitHub teams ([a09cd42](https://github.com/jackbuehner/cristata-api/commit/a09cd42ab3ead21706668e9b47667e5a5e672a37))
* util to flatten objects ([bb09bf0](https://github.com/jackbuehner/cristata-api/commit/bb09bf09c850534c817cc711f6eee7a39b6c8c58))
* **v3:** add query to get a signed s3 url ([75abae8](https://github.com/jackbuehner/cristata-api/commit/75abae802177e83fa42855763619d155b2ba3786))
* wrap everything in try catch blocks ([cf5679d](https://github.com/jackbuehner/cristata-api/commit/cf5679da9e1ebfcdec0240a08d8386e66d13c811))


### Bug Fixes

* `article_id` schema field should be ObjectID instead of String ([eb3b59c](https://github.com/jackbuehner/cristata-api/commit/eb3b59cbbbde3ee4bcd8cfcdd849bf9696e38010))
* add slug when publishing satire ([291f4cb](https://github.com/jackbuehner/cristata-api/commit/291f4cb068fa894717e9a2510ab39b1a754b24ff))
* aggregation ignoring filters and ids ([7f648e4](https://github.com/jackbuehner/cristata-api/commit/7f648e4d80c107c400d895cd8191a8c4b2e24ece))
* agregation pipline relations ([b06fb41](https://github.com/jackbuehner/cristata-api/commit/b06fb4158285002b0be671e6e7d69f834085d87b))
* allways return array when handling pruned people ([c84ec70](https://github.com/jackbuehner/cristata-api/commit/c84ec707589cf8a611244ebffed3f7764934006e))
* **articles:** use ObjectID instead of Int for modify input ([017c0c9](https://github.com/jackbuehner/cristata-api/commit/017c0c9d394749ae5eb00361af36551d7806d3b5))
* broken object ids after iso to date function ([193dd1f](https://github.com/jackbuehner/cristata-api/commit/193dd1f90ce71a157ba1900dd8130cca0546e461))
* broken playground due to csp ([41f59bf](https://github.com/jackbuehner/cristata-api/commit/41f59bfa72ea871fae70c90bdf33118b28f2003b))
* cannot get article to hide ([4f7caff](https://github.com/jackbuehner/cristata-api/commit/4f7caffaf78e77c19a7aa6f16e5e5529ba8ad88d))
* changes to existing profile docs not saving ([4417258](https://github.com/jackbuehner/cristata-api/commit/44172585434d1b73bee16cc21434757aa05f8376))
* **CollectionActionAccess:** enable querying deactivate, which is available for the user's collecion ([0be2833](https://github.com/jackbuehner/cristata-api/commit/0be28331bfa7d82b27fe980c2e3333124fcd6948))
* collectionActivity name should be optional (not all collections have a name field) ([b44ce7b](https://github.com/jackbuehner/cristata-api/commit/b44ce7bedb9bdce64f5665345c82132e645a6bd0))
* comparison of hex to objectId ([8686d16](https://github.com/jackbuehner/cristata-api/commit/8686d163d88e06ba75d819f490a7c2fa2c80db55))
* completely wrong schema for flush documents ([487e8f0](https://github.com/jackbuehner/cristata-api/commit/487e8f07a1eb6147b23b516d0fa4cffba266f33b))
* convert default id to objectId instead of integer ([10e6985](https://github.com/jackbuehner/cristata-api/commit/10e69854afdb91f20814497a15ba143f9f14b729))
* convert profile id to integer ([8662eca](https://github.com/jackbuehner/cristata-api/commit/8662eca634dbb6e55f8a4a6d60dbcaa6bc567441))
* correctly merge new and old data when modifying doc ([12cebba](https://github.com/jackbuehner/cristata-api/commit/12cebba94849b124fa874d07896a59dae1842020))
* crash when piping to nonexistent photo url ([6e98a56](https://github.com/jackbuehner/cristata-api/commit/6e98a56ff671d505a82fa1769d042d1c0fd2db7a))
* crash when user.methods is not defined ([fd4cd64](https://github.com/jackbuehner/cristata-api/commit/fd4cd64a4e9c13c4ed885e22c0c7f15374710a78))
* disable user login when the user is disabled (retired) ([442d375](https://github.com/jackbuehner/cristata-api/commit/442d375aa468bf8543db935ee58827960bc3cbba))
* do not check standard permissions when collection does not have standard permissions enabled ([e94a5a9](https://github.com/jackbuehner/cristata-api/commit/e94a5a9a4bca5ee2f31525cc911a137f0c619fbd))
* don' try to convert schema into a schema - it is already a schema ([9a8e1ec](https://github.com/jackbuehner/cristata-api/commit/9a8e1ec27a9b337ce3058b0062b9f83b7eedb753))
* error due to unnecessary console log ([917f9fb](https://github.com/jackbuehner/cristata-api/commit/917f9fb038d4333c45b5f545a35ddab3d50dca6d))
* error in findDocAndPrune when doc is null ([06d4b04](https://github.com/jackbuehner/cristata-api/commit/06d4b04f609d219ea9788be0344cef743b45eae1))
* error that @types/mongoose and mongodb types are not compatable ([c661616](https://github.com/jackbuehner/cristata-api/commit/c661616fc928b3ba1b9210e6b64aa9ab549875e7))
* error when more property is undefined ([ba45d9e](https://github.com/jackbuehner/cristata-api/commit/ba45d9efbf0f34290ffa5eb27b558c87b438e635))
* error where pagination only worked with offset ([457390f](https://github.com/jackbuehner/cristata-api/commit/457390f43592775127b0d1087bf165813172eb6f))
* eslint errors ([2f1b9c7](https://github.com/jackbuehner/cristata-api/commit/2f1b9c73d534e67736a9867c3365c81f9b2bab93))
* exclude display_authors from id replacement ([8d7fbdb](https://github.com/jackbuehner/cristata-api/commit/8d7fbdb2b0a0f4dee3d19feca0774693cfaa92a5))
* fall back on current article title when new title is pushed on publish ([94df91a](https://github.com/jackbuehner/cristata-api/commit/94df91aa37d817c299269e3d37f6d12f78a49625))
* fieldpath error when finding doc by id ([bcace6b](https://github.com/jackbuehner/cristata-api/commit/bcace6bafe35e01f462edcb54f64da13e348e2f4))
* **findDoc:** incorrect types ([8becd52](https://github.com/jackbuehner/cristata-api/commit/8becd5289332a705ab30329f9659904c28975440))
* flattenObject argument is undefined ([398631c](https://github.com/jackbuehner/cristata-api/commit/398631c0598eed4241b2dd7c0bb8f1c31d9428cb))
* **flattenObject:** do not flatten valid ObjectId ([6ef18b6](https://github.com/jackbuehner/cristata-api/commit/6ef18b6cf93a6d52596a3583eaeee6ef03e02047))
* **flatten:** remove _doc when hanling mongoose documents ([e920c4b](https://github.com/jackbuehner/cristata-api/commit/e920c4b2981425f320fc6bd2c7352e18a6a4b043))
* **getPasswordStatus:** convert date ms to integer to ensure date is valid ([df0b765](https://github.com/jackbuehner/cristata-api/commit/df0b765417c07bbad24a9bf904f39be2ebb24c32))
* **getUsers:** when userIds is undefined, use null instead of the first user in the database ([f0307c5](https://github.com/jackbuehner/cristata-api/commit/f0307c5813308b9df466d3b5ef2dcd0f34914aa4))
* GHTeams type ([149d695](https://github.com/jackbuehner/cristata-api/commit/149d6959b0cdefa8b47bccb4029b555a024823bb))
* github user id should be number ([1b895c9](https://github.com/jackbuehner/cristata-api/commit/1b895c90b212c61beb84c6f226127f089b1e2603))
* give permission to all articles to managing editors ([a36ab40](https://github.com/jackbuehner/cristata-api/commit/a36ab406a5f9f7b73b3ed46ac60b5ea257c75070))
* **gql:** missing checks for ANY access in `canDo` helper ([5ef777c](https://github.com/jackbuehner/cristata-api/commit/5ef777cd46c6a9c824babc0e61a037f378a6f7d8))
* handle case where doc could no be found ([d8c197b](https://github.com/jackbuehner/cristata-api/commit/d8c197bcf973322404b06da1f02e26ae3b64683d))
* handle case where user doc is undefined ([a472b1c](https://github.com/jackbuehner/cristata-api/commit/a472b1cd5bb1f45d7aa0f94d2d92571f68d888e4))
* handle when pipeline2 is undefined ([3bd9d56](https://github.com/jackbuehner/cristata-api/commit/3bd9d562d5372b4adc994b93bb551f0636b2ab00))
* history subdoc schema ([3cc3251](https://github.com/jackbuehner/cristata-api/commit/3cc3251ae4224c076d675a87ce4083655d503de4))
* incorrect auth user type ([5aa53d2](https://github.com/jackbuehner/cristata-api/commit/5aa53d22cb62921c12601970f7cfeb7628ef8a89))
* incorrect params for create mutations ([4d3536d](https://github.com/jackbuehner/cristata-api/commit/4d3536d770539056b415333a58dbd764ed795f89))
* incorrect schema types and typedefs for users ([4d95f7b](https://github.com/jackbuehner/cristata-api/commit/4d95f7b24afd1abcb96987d27bc0fba106a8f48d))
* incorrect type because passport-local-mongoose converts _id to hex string ([3a3872e](https://github.com/jackbuehner/cristata-api/commit/3a3872e39280d7812e94b0158ac3ccce06d1dcb4))
* incorrect type for `article.people.editor.primary` ([106bde0](https://github.com/jackbuehner/cristata-api/commit/106bde06ff90cbb982fdf8e1524440753b1e7e00))
* incorrectly using Int for User id instead of ObjectID ([c6879dd](https://github.com/jackbuehner/cristata-api/commit/c6879ddcab1bd4effbbc3d468480757e0c7bc14e))
* JSON and Date constuctor overwritten ([ee45d02](https://github.com/jackbuehner/cristata-api/commit/ee45d02ca01f3ecfb9ad0f3d7e88938bf2d78a63))
* missing Date scalar serialization and parsing ([1a79115](https://github.com/jackbuehner/cristata-api/commit/1a79115ae6f22cac09cd08f582fabfd552f007fb))
* missing photo credit on public articles ([08d010b](https://github.com/jackbuehner/cristata-api/commit/08d010bc2de4fa5285c8c884fa9083b7a79d8430))
* **modifyDoc:** actually check if user has permission to modify doc ([87184cd](https://github.com/jackbuehner/cristata-api/commit/87184cd38abb4ec1efc22f9fba264bef976dc944))
* move apollo to onListen so that it connects to the app when server first starts ([7d9760d](https://github.com/jackbuehner/cristata-api/commit/7d9760d8dc7b4c0c07f694a04e33fea29fdb8cb6))
* overwriting data in subobjects ([83502ed](https://github.com/jackbuehner/cristata-api/commit/83502ed0ab12ac96d9b92050bde286009d0eb4e2))
* passport unable to parse query string ([462a8c8](https://github.com/jackbuehner/cristata-api/commit/462a8c8bb53bcbe39980f0f5b277e0c15c7f5aea))
* **passport:** teams not defined in deserialized user ([e2513a9](https://github.com/jackbuehner/cristata-api/commit/e2513a9f6c8ef3b9f3fdd754bbd5c4ffa7e46125))
* permissions field typo ([1366bf5](https://github.com/jackbuehner/cristata-api/commit/1366bf533292c0290b4eb1a30f3d65b9e2d7e4e1))
* **photos:** allow everyone to view photos ([f4ba998](https://github.com/jackbuehner/cristata-api/commit/f4ba998c42af38ba17bff096607d666a01e2285c))
* **photos:** default to Teams.ANY for all photos ([b3aa1d1](https://github.com/jackbuehner/cristata-api/commit/b3aa1d104005365fadc766ab48ab9b9c818853d9))
* prevent processing of infinitly nested objects ([cfac954](https://github.com/jackbuehner/cristata-api/commit/cfac954e8ff67274d79ed1fd515c0217cd0b75ea))
* **pruneDoc:** error when obj is undefined ([d82b8a1](https://github.com/jackbuehner/cristata-api/commit/d82b8a1b9fb27e75cddfad83841714c61ce79451))
* **pruneDocs:** crash when obj is not a mongoose object with toObject() ([e9d31a4](https://github.com/jackbuehner/cristata-api/commit/e9d31a4f31d6f9c97f4d7f405e0c29bb4d1a0b54))
* **prune:** retain object ids as hex instead of undefined ([f41d225](https://github.com/jackbuehner/cristata-api/commit/f41d225b6b9e5bc99cad403bb18b4f2118a513f7))
* query parser not setting ([0b811eb](https://github.com/jackbuehner/cristata-api/commit/0b811eb64cbc5a3aa95dc8c61a5a537e95db6308))
* remove default for articel_id because empty sting is not valid _id ([0ea0b0f](https://github.com/jackbuehner/cristata-api/commit/0ea0b0fef1612b3aef26f0f1237440084a93315b))
* remove unused import ([43579b2](https://github.com/jackbuehner/cristata-api/commit/43579b2d3714f8898475c3f2eb3d603b9c5fd72e))
* return User instead of ObjectId ([f1ca856](https://github.com/jackbuehner/cristata-api/commit/f1ca856892b44c85e24aac4e12c2b778203517b8))
* set default page number to prevent errors ([be3a4b7](https://github.com/jackbuehner/cristata-api/commit/be3a4b73c57548f48bc4fd00b82ab52ae0b82b95))
* socket code continuing when there is no cookie ([852f947](https://github.com/jackbuehner/cristata-api/commit/852f947653b212fe8cc6dad3e156e77b8298adce))
* subdocs not automatically applying ([63c7829](https://github.com/jackbuehner/cristata-api/commit/63c782946e9371cfea7c06b0b323756dab54e035))
* teams is array of strings - not a single string ([9b244be](https://github.com/jackbuehner/cristata-api/commit/9b244bef76c693e8dd8bfcde24f54c613f3af26f))
* types ([1a9d773](https://github.com/jackbuehner/cristata-api/commit/1a9d773bc8c02bbca23f72aa4956fa4589a4d368))
* typescript error ([1039443](https://github.com/jackbuehner/cristata-api/commit/10394434217309da56e4b8f989570f1e6f8d7428))
* unable to save doc changes ([08da782](https://github.com/jackbuehner/cristata-api/commit/08da782369452228c551547285054eb85077e92b))
* undeifned public article authors ([0ed326f](https://github.com/jackbuehner/cristata-api/commit/0ed326f364b86041fdda8638399b20897e4a2045))
* unpublished articles should be hidden from public endpoints ([cc148ed](https://github.com/jackbuehner/cristata-api/commit/cc148ed378588328aad41a5a77e2e98202cd0030))
* use admin PAT since not all users auth with GitHub ([47e8c41](https://github.com/jackbuehner/cristata-api/commit/47e8c4122cf5499b6d469ccefe0e8b7422b85e32))
* use correct action ([b52504d](https://github.com/jackbuehner/cristata-api/commit/b52504ddeb1f1c0c30554bc8b1b243da13dc77a5))
* use custom mutation for settings instead of default collection helpers ([6953a79](https://github.com/jackbuehner/cristata-api/commit/6953a7971b8f316434e669952c5b874adcc3e17f))
* use Date instead of String in typedefs ([0b16dfb](https://github.com/jackbuehner/cristata-api/commit/0b16dfb46aac7b4f0ce4c9a91b122deb11279a58))
* **users:** active users should be able to list other user profiles ([1d8072b](https://github.com/jackbuehner/cristata-api/commit/1d8072b86f8dfa4ce12744d76ec6cf5a82374603))
* **users:** failure to create account when slug or username already exist ([2a97c8d](https://github.com/jackbuehner/cristata-api/commit/2a97c8d22ff47264d7d8e1ad359f9c88fa81b971))
* **v2:** automatic id to profile link ([e692414](https://github.com/jackbuehner/cristata-api/commit/e692414c7bf6f85506d73586b96efc20f6d40020))
* **v2:** flush articles object replaces properties if they do not change ([9888dd1](https://github.com/jackbuehner/cristata-api/commit/9888dd14b1e33763b5c75c3e0c88c42ebdde5d49))
* **v2:** unable to get featured articles ([f1303f4](https://github.com/jackbuehner/cristata-api/commit/f1303f414487a1aff6a17ed4a285b02dcb830592))
* **v2:** undeefined when published stage and creating slug ([99f8c06](https://github.com/jackbuehner/cristata-api/commit/99f8c067f812802f1717e71551e064eb1d0c8315))
* wrong schema for settings collection ([ea40292](https://github.com/jackbuehner/cristata-api/commit/ea40292fd93ea307cf05d867af1bb6e0d73042bb))
